<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMMANUEL | Administration</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --dark: #1a1a1a; --light: #fdfdfd; }
        body { font-family: 'Lora', serif; background: var(--light); color: var(--dark); margin: 0; padding: 20px; }
        .admin-container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); border-top: 8px solid var(--gold); }
        h1 { font-family: 'Montserrat', sans-serif; text-align: center; text-transform: uppercase; letter-spacing: 3px; color: var(--dark); }
        
        .form-section { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
        .full-width { grid-column: span 2; }
        
        label { font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 0.8em; text-transform: uppercase; color: var(--gold); display: block; margin-bottom: 8px; }
        input, textarea, select { width: 100%; padding: 12px; border: 1px solid #eee; border-radius: 8px; font-family: 'Lora', serif; font-size: 1em; background: #fafafa; }
        textarea { height: 120px; resize: vertical; }
        
        .btn-group { margin-top: 30px; text-align: center; }
        button { font-family: 'Montserrat', sans-serif; font-weight: 900; padding: 15px 35px; border-radius: 50px; border: none; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .btn-add { background: var(--dark); color: white; margin-right: 10px; }
        .btn-add:hover { background: var(--gold); transform: translateY(-2px); }
        .btn-copy { background: var(--gold); color: white; }
        
        #json-output { margin-top: 40px; background: #272822; color: #f8f8f2; padding: 20px; border-radius: 10px; font-family: monospace; overflow-x: auto; white-space: pre-wrap; font-size: 0.9em; max-height: 400px; }
        .status-msg { color: #27ae60; font-weight: bold; margin-top: 10px; display: none; text-align: center; }
        .preview-img { width: 100px; height: 100px; object-fit: cover; border-radius: 10px; margin-top: 10px; border: 2px solid var(--gold); display: none; }
    </style>
</head>
<body>

<div class="admin-container">
    <h1>üèõÔ∏è Console Emmanuel</h1>
    <p style="text-align: center; font-style: italic; color: #95a5a6;">Ajoutez vos messages quotidiens et g√©n√©rez le fichier de mise √† jour.</p>

    <div class="form-section">
        <div>
            <label>ID du Message (Suivant)</label>
            <input type="number" id="msg-id" placeholder="Ex: 5">
        </div>
        <div>
            <label>Date de Publication</label>
            <input type="date" id="msg-date">
        </div>
        
        <div class="full-width">
            <label>Lien de l'image (Catbox ou autre)</label>
            <input type="text" id="msg-image" placeholder="https://files.catbox.moe/..." oninput="previewImage(this.value)">
            <img id="img-preview" class="preview-img">
        </div>

        <div>
            <label>Cat√©gorie (FR)</label>
            <input type="text" id="msg-cat-fr" placeholder="Ex: M√©ditation">
        </div>
        <div>
            <label>Category (EN)</label>
            <input type="text" id="msg-cat-en" placeholder="Ex: Meditation">
        </div>

        <div>
            <label>Titre (FR)</label>
            <input type="text" id="msg-titre-fr" placeholder="Titre en fran√ßais">
        </div>
        <div>
            <label>Title (EN)</label>
            <input type="text" id="msg-titre-en" placeholder="Title in English">
        </div>

        <div class="full-width">
            <label>Contenu du Message (FR) - **gras** support√©</label>
            <textarea id="msg-texte-fr" placeholder="√âcrivez le message ici..."></textarea>
        </div>
        <div class="full-width">
            <label>Message Content (EN)</label>
            <textarea id="msg-texte-en" placeholder="Write the message in English..."></textarea>
        </div>
    </div>

    <div class="btn-group">
        <button class="btn-add" onclick="ajouterMessage()">‚ûï Ajouter √† la liste</button>
        <button class="btn-copy" onclick="copierJSON()">üìã Copier le JSON complet</button>
    </div>
    
    <div id="status" class="status-msg">‚úÖ Message ajout√© ! Copiez le code ci-dessous.</div>

    <div id="json-output">[]</div>
</div>

<script>
    let messagesListe = [];

    // Charger le JSON actuel si vous voulez compl√©ter une liste existante
    // Vous pouvez coller votre JSON actuel dans la console pour l'√©diter
    
    function previewImage(url) {
        const img = document.getElementById('img-preview');
        if(url) { img.src = url; img.style.display = 'block'; }
        else { img.style.display = 'none'; }
    }

    function ajouterMessage() {
        const newMessage = {
            id: parseInt(document.getElementById('msg-id').value),
            date: document.getElementById('msg-date').value,
            categorie: document.getElementById('msg-cat-fr').value,
            categorie_en: document.getElementById('msg-cat-en').value,
            titre: document.getElementById('msg-titre-fr').value,
            titre_en: document.getElementById('msg-titre-en').value,
            texte: document.getElementById('msg-texte-fr').value,
            texte_en: document.getElementById('msg-texte-en').value,
            image: document.getElementById('msg-image').value
        };

        messagesListe.push(newMessage);
        // On trie par ID pour que le JSON reste propre
        messagesListe.sort((a, b) => a.id - b.id);
        
        document.getElementById('json-output').innerText = JSON.stringify(messagesListe, null, 4);
        
        // Notification
        const status = document.getElementById('status');
        status.style.display = 'block';
        setTimeout(() => { status.style.display = 'none'; }, 3000);
        
        // Pr√©paration de l'ID suivant pour gagner du temps
        document.getElementById('msg-id').value = newMessage.id + 1;
    }

    function copierJSON() {
        const text = document.getElementById('json-output').innerText;
        navigator.clipboard.writeText(text).then(() => {
            alert("Le code JSON a √©t√© copi√© ! Collez-le maintenant dans votre fichier data.json");
        });
    }
</script>

</body>
</html>
